<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° íŠ¹íŒ ì•ˆë‚´</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- service worker ë“±ë¡ -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .catch(err => console.log('SW ë“±ë¡ ì‹¤íŒ¨:', err));
      });
    }
  </script>

  <style>
    :root{
      --bg:#f4fbff;
      --ink:#0b1220;
      --sub:#334155;

      --skt:#ff3b4a;
      --kt:#111827;
      --lg:#c026d3;
      --internet:#f97316;
      --mvno:#16a34a;

      --blue:#0ea5e9;
      --blue2:#2563eb;

      --kakao:#fee500;
      --kakao-border:#facc15;

      --radius:24px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,'Noto Sans KR',sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 450px at 10% 0%, rgba(14,165,233,0.18) 0%, rgba(14,165,233,0) 55%),
        radial-gradient(900px 420px at 95% 22%, rgba(34,197,94,0.12) 0%, rgba(34,197,94,0) 60%),
        linear-gradient(180deg, #ffffff 0%, var(--bg) 35%, #ffffff 100%);
    }

    .app{
      width:100%;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
    @media(min-width:1100px){
      .app{
        max-width:1100px;
        margin:18px auto;
        border-radius:28px;
        overflow:hidden;
        background:#fff;
        box-shadow:0 26px 60px rgba(15,23,42,0.14);
      }
    }

    /* í—¤ë” */
    .hero{
      padding:18px 18px 16px;
      background:
        radial-gradient(1000px 420px at 15% 0%, rgba(14,165,233,0.22) 0%, rgba(14,165,233,0) 60%),
        linear-gradient(180deg, #ffffff 0%, #f0fbff 100%);
      border-bottom:1px solid rgba(15,23,42,0.08);
    }
    .hero-title{
      margin:0;
      font-size:32px;
      font-weight:1000;
      letter-spacing:-0.06em;
      line-height:1.06;
    }
    .hero-sub{
      margin:8px 0 0;
      font-size:15px;
      font-weight:1000;
      color:var(--sub);
    }

    /* íƒ­ */
    .tab-bar{
      position:sticky; top:0; z-index:30;
      background:rgba(255,255,255,0.94);
      backdrop-filter:saturate(180%) blur(10px);
      border-bottom:1px solid rgba(15,23,42,0.08);
      padding:10px 12px 12px;
    }
    .tabs{display:flex;gap:10px}
    .tab-btn{
      flex:1;
      border:none;
      cursor:pointer;
      padding:14px 10px;
      border-radius:999px;
      font-size:15px;
      font-weight:1000;
      letter-spacing:-0.02em;
      background:#ffffff;
      color:#0b1220;
      border:1px solid rgba(15,23,42,0.10);
      box-shadow:0 12px 22px rgba(15,23,42,0.08);
      transition:.18s ease;
    }
    .tab-btn.active{
      background:linear-gradient(135deg, var(--blue) 0%, var(--blue2) 100%);
      color:#fff;
      border-color:rgba(14,165,233,0.35);
      box-shadow:0 18px 30px rgba(37,99,235,0.22);
      transform:translateY(-1px);
    }

    /* ì»¨í…ì¸ /íŒ¨ë„ */
    .content{padding:14px 14px 140px} /* í•˜ë‹¨ ìƒíƒœë°” ì—¬ìœ  */
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .section-title{
      display:flex;align-items:center;gap:10px;
      margin:10px 2px 14px;
      font-size:18px;
      font-weight:1000;
    }
    .section-dot{
      width:12px;height:12px;border-radius:50%;
      background:linear-gradient(135deg,var(--blue) 0%,var(--blue2) 100%);
      box-shadow:0 0 0 7px rgba(14,165,233,0.16);
    }

    /* ì¹´ë“œ: ìµœëŒ€ íŠ€ëŠ” ë””ìì¸ */
    .card{
      position:relative;
      border-radius:var(--radius);
      padding:18px 18px 16px;
      margin-bottom:16px;
      overflow:hidden;

      background:
        radial-gradient(1200px 320px at 18% 0%, rgba(14,165,233,0.22) 0%, rgba(14,165,233,0) 58%),
        radial-gradient(1200px 360px at 90% 40%, rgba(34,197,94,0.14) 0%, rgba(34,197,94,0) 60%),
        linear-gradient(180deg, #ffffff 0%, #f8fdff 100%);

      border:1px solid rgba(2,132,199,0.22);
      box-shadow:
        0 22px 44px rgba(2,132,199,0.16),
        0 10px 18px rgba(15,23,42,0.08);
    }

    /* ìƒë‹¨ ë„¤ì˜¨ ë¼ì¸: í†µì‹ ì‚¬ë³„ */
    .card::before{
      content:"";
      position:absolute;left:0;top:0;width:100%;height:7px;
    }
    .card[data-carrier="skt"]::before{
      background:linear-gradient(90deg, rgba(255,59,74,0) 0%, rgba(255,59,74,1) 18%, rgba(255,59,74,1) 82%, rgba(255,59,74,0) 100%);
      filter:drop-shadow(0 0 12px rgba(255,59,74,0.50));
    }
    .card[data-carrier="kt"]::before{
      background:linear-gradient(90deg, rgba(17,24,39,0) 0%, rgba(17,24,39,1) 18%, rgba(17,24,39,1) 82%, rgba(17,24,39,0) 100%);
      filter:drop-shadow(0 0 12px rgba(17,24,39,0.35));
    }
    .card[data-carrier="lg"]::before{
      background:linear-gradient(90deg, rgba(192,38,211,0) 0%, rgba(192,38,211,1) 18%, rgba(192,38,211,1) 82%, rgba(192,38,211,0) 100%);
      filter:drop-shadow(0 0 12px rgba(192,38,211,0.45));
    }
    .card[data-carrier="internet"]::before{
      background:linear-gradient(90deg, rgba(249,115,22,0) 0%, rgba(249,115,22,1) 18%, rgba(249,115,22,1) 82%, rgba(249,115,22,0) 100%);
      filter:drop-shadow(0 0 12px rgba(249,115,22,0.42));
    }
    .card[data-carrier="mvno"]::before{
      background:linear-gradient(90deg, rgba(22,163,74,0) 0%, rgba(22,163,74,1) 18%, rgba(22,163,74,1) 82%, rgba(22,163,74,0) 100%);
      filter:drop-shadow(0 0 12px rgba(22,163,74,0.40));
    }

    .card-header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }

    .card-title{
      margin:0;
      font-size:30px;
      font-weight:1000;
      letter-spacing:-0.06em;
      line-height:1.06;
    }
    .card-tag{
      padding:10px 12px;
      border-radius:999px;
      font-size:14px;
      font-weight:1000;
      background:rgba(14,165,233,0.12);
      color:#075985;
      border:1px solid rgba(2,132,199,0.20);
      white-space:nowrap;
      box-shadow:0 10px 18px rgba(2,132,199,0.08);
    }

    .price{
      font-size:46px;
      font-weight:1000;
      letter-spacing:-0.07em;
      line-height:1.0;
      margin:10px 0 8px;
      color:#0b1220;
      text-shadow:0 12px 22px rgba(2,132,199,0.14);
    }

    .subtext{
      margin:0 0 14px;
      font-size:19px;
      font-weight:1000;
      color:#0f172a;
      opacity:0.95;
      letter-spacing:-0.02em;
      line-height:1.15;
    }

    .badge-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-bottom:14px;
    }
    .badge{
      font-size:15px;
      font-weight:1000;
      padding:10px 12px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid rgba(15,23,42,0.14);
      box-shadow:0 12px 20px rgba(15,23,42,0.08);
    }

    /* ì¹´ë“œ ë²„íŠ¼ 3ê°œ */
    .actions{
      display:flex;
      gap:10px;
      margin-top:2px;
    }
    .btn{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px 12px;
      border-radius:18px;
      text-decoration:none;
      font-size:16px;
      font-weight:1000;
      border:1px solid rgba(15,23,42,0.12);
      background:#0b1220;
      color:#ffffff;
      box-shadow:0 18px 30px rgba(15,23,42,0.20);
      transition:.15s ease;
      user-select:none;
    }
    .btn:active{transform:scale(0.99)}
    .btn.sms{
      background:#e5e7eb;
      color:#111827;
      box-shadow:0 18px 30px rgba(15,23,42,0.10);
    }
    .btn.kakao{
      background:var(--kakao);
      border-color:var(--kakao-border);
      color:#111827;
      box-shadow:0 18px 30px rgba(180,149,0,0.28);
    }

    /* í•˜ë‹¨ ìƒíƒœ ì•ˆë‚´ ë°” (ì„±ì§€ ê°„íŒ) */
    .statusbar{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:50;

      background:rgba(255,255,255,0.93);
      backdrop-filter:saturate(200%) blur(12px);
      border-top:1px solid rgba(15,23,42,0.10);
      box-shadow:0 -18px 40px rgba(15,23,42,0.14);

      padding:12px 14px 14px;
    }
    .status-inner{
      max-width:1100px;
      margin:0 auto;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .status-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .status-left{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .status-dot{
      width:12px; height:12px; border-radius:50%;
      background:linear-gradient(135deg,var(--blue) 0%,var(--blue2) 100%);
      box-shadow:0 0 0 8px rgba(14,165,233,0.18);
      flex:0 0 auto;
    }
    .status-current{
      font-size:20px;
      font-weight:1000;
      letter-spacing:-0.05em;
      line-height:1.1;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width:70vw;
    }
    .status-hours{
      font-size:15px;
      font-weight:1000;
      color:#0f172a;
      background:#f1f5f9;
      border:1px solid rgba(15,23,42,0.10);
      padding:10px 12px;
      border-radius:999px;
      box-shadow:0 12px 22px rgba(15,23,42,0.08);
      white-space:nowrap;
    }
    .status-sub{
      font-size:14px;
      font-weight:1000;
      color:#334155;
      letter-spacing:-0.02em;
      line-height:1.25;
    }

    @media(max-width:420px){
      .hero-title{font-size:28px}
      .card-title{font-size:28px}
      .price{font-size:42px}
      .subtext{font-size:18px}
      .status-current{font-size:19px}
      .status-hours{font-size:14px}
      .status-sub{font-size:13px}
    }
  </style>
</head>

<body>
  <div class="app">
    <header class="hero">
      <h1 class="hero-title">ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° íŠ¹íŒ ì•ˆë‚´</h1>
      <div class="hero-sub">SKÂ·KTÂ·LG / ì¸í„°ë„·Â·TV í˜„ê¸ˆ ìµœëŒ€ì§€ì› / ì•Œëœ°ìš”ê¸ˆ 3,300ì›~</div>
    </header>

    <div class="tab-bar">
      <div class="tabs">
        <button class="tab-btn active" data-tab="skt">SKT</button>
        <button class="tab-btn" data-tab="kt">KT</button>
        <button class="tab-btn" data-tab="lg">LGU+</button>
        <button class="tab-btn" data-tab="internet">ì¸í„°ë„·Â·TV</button>
        <button class="tab-btn" data-tab="mvno">ì•Œëœ°ìš”ê¸ˆ</button>
      </div>
    </div>

    <main class="content">
      <section class="tab-panel active" data-panel="skt">
        <div class="section-title"><span class="section-dot"></span>SKT íŠ¹íŒ</div>
        <div id="list-skt"></div>
      </section>

      <section class="tab-panel" data-panel="kt">
        <div class="section-title"><span class="section-dot"></span>KT íŠ¹íŒ</div>
        <div id="list-kt"></div>
      </section>

      <section class="tab-panel" data-panel="lg">
        <div class="section-title"><span class="section-dot"></span>LGU+ íŠ¹íŒ</div>
        <div id="list-lg"></div>
      </section>

      <section class="tab-panel" data-panel="internet">
        <div class="section-title"><span class="section-dot"></span>ì¸í„°ë„·Â·TV í˜„ê¸ˆ íŠ¹íŒ</div>
        <div id="list-internet"></div>
      </section>

      <section class="tab-panel" data-panel="mvno">
        <div class="section-title"><span class="section-dot"></span>ì•Œëœ°ìš”ê¸ˆ íŠ¹ê°€</div>
        <div id="list-mvno"></div>
      </section>
    </main>
  </div>

  <!-- í•˜ë‹¨ ìƒíƒœë°” -->
  <div class="statusbar">
    <div class="status-inner">
      <div class="status-top">
        <div class="status-left">
          <span class="status-dot" id="statusDot"></span>
          <div class="status-current" id="statusCurrent">í˜„ì¬: SKT ê¸°ë³€ íŠ¹ê°€ ì§„í–‰ì¤‘</div>
        </div>
        <div class="status-hours" id="statusHours">ìƒë‹´ì‹œê°„ 09:30 ~ 18:30</div>
      </div>
      <div class="status-sub" id="statusSub">
        ì¡°ê±´ì€ <b>ê° ì¹´ë“œ ê¸°ì¤€</b> Â· í†µí™”/ë¬¸ì/ì˜¤í”ˆì¹´í†¡ ì¦‰ì‹œ
      </div>
    </div>
  </div>

  <script>
    /* =========================
       ë„¤ê°€ ì•ìœ¼ë¡œ ë§Œì§€ëŠ” ê²ƒ 2ê°œ
       1) ì˜¤ëŠ˜ ì§‘ì¤‘ íƒ­ 1ì¤„ ë³€ê²½
       2) data.csv ë‚´ìš© ì±„ìš°ê¸°
    ========================= */

    // âœ… ì˜¤ëŠ˜ ì§‘ì¤‘ íƒ­: "skt" | "kt" | "lg" | "internet" | "mvno"
    const FOCUS_TODAY = "skt";

    // ì—°ë½ì²˜(ê³ ì •)
    const OPEN_KAKAO_URL = "https://open.kakao.com/o/s729bI5h";
    const CALL_TEL = "0428212272";
    const SMS_NUM  = "01058391512";
    const CSV_URL  = "data.csv";

    // ìƒë‹´ ê°€ëŠ¥ ì‹œê°„ (ì›í•˜ë©´ ì—¬ê¸°ë§Œ ë°”ê¾¸ë©´ ë)
    const BUSINESS = {
      openHour: 9, openMin: 30,
      closeHour: 18, closeMin: 30,
      weekendOpen: false
    };

    // íƒ­ë³„ ê°„íŒ ë¬¸êµ¬ (ì§‘ì¤‘/ì¼ë°˜)
    const TAB_SIGN = {
      skt: {
        focusedMain: "ğŸ”¥ ì˜¤ëŠ˜ì€ SKT ì§‘ì¤‘",
        main: "í˜„ì¬: SKT ê¸°ë³€ íŠ¹ê°€ ì§„í–‰ì¤‘",
        sub: "SKT ì¡°ê±´ì€ ì¹´ë“œ ê¸°ì¤€ Â· ê¸°ë³€/ì´ë™ ì¬ê³  ë³€ë™"
      },
      kt: {
        focusedMain: "ğŸ”¥ ì˜¤ëŠ˜ì€ KT ì§‘ì¤‘",
        main: "í˜„ì¬: KT ì´ë™/ê¸°ë³€ íŠ¹ê°€ ì§„í–‰ì¤‘",
        sub: "KT ì¡°ê±´ì€ ì¹´ë“œ ê¸°ì¤€ Â· ìš”ê¸ˆì œ/ìœ ì§€ê¸°ê°„ í™•ì¸"
      },
      lg: {
        focusedMain: "ğŸ”¥ ì˜¤ëŠ˜ì€ LGU+ ì§‘ì¤‘",
        main: "í˜„ì¬: LGU+ íŠ¹ê°€ ì§„í–‰ì¤‘",
        sub: "LGU+ ì¡°ê±´ì€ ì¹´ë“œ ê¸°ì¤€ Â· ì¬ê³ /ìƒ‰ìƒ ë³€ë™"
      },
      internet: {
        focusedMain: "ğŸ”¥ ì˜¤ëŠ˜ì€ ì¸í„°ë„·Â·TV ì§‘ì¤‘",
        main: "í˜„ì¬: ì¸í„°ë„·Â·TV í˜„ê¸ˆ íŠ¹ê°€",
        sub: "ì„¤ì¹˜/ì£¼ì†Œì§€ì— ë”°ë¼ ì§€ì›ê¸ˆ ë³€ë™ (ì¹´ë“œ ê¸°ì¤€)"
      },
      mvno: {
        focusedMain: "ğŸ”¥ ì˜¤ëŠ˜ì€ ì•Œëœ°ìš”ê¸ˆ ì§‘ì¤‘",
        main: "í˜„ì¬: ì•Œëœ°ìš”ê¸ˆ ì´ˆì €ê°€ ì§„í–‰ì¤‘",
        sub: "ì‚¬ìš©ëŸ‰ ë§ì¶¤ ì¶”ì²œ Â· ì¦‰ì‹œê°œí†µ ê°€ëŠ¥ (ì¹´ë“œ ê¸°ì¤€)"
      }
    };

    // ìƒíƒœë°” ìš”ì†Œ
    const statusCurrent = document.getElementById("statusCurrent");
    const statusSub = document.getElementById("statusSub");
    const statusHours = document.getElementById("statusHours");
    const statusDot = document.getElementById("statusDot");

    const DOT_COLOR = {
      skt: "var(--skt)",
      kt: "var(--kt)",
      lg: "var(--lg)",
      internet: "var(--internet)",
      mvno: "var(--mvno)"
    };

    function pad2(n){ return String(n).padStart(2,"0"); }

    function isBusinessOpen(now){
      const day = now.getDay(); // 0=ì¼ 6=í† 
      const isWeekend = (day === 0 || day === 6);
      if(isWeekend && !BUSINESS.weekendOpen) return false;

      const open = new Date(now);
      open.setHours(BUSINESS.openHour, BUSINESS.openMin, 0, 0);

      const close = new Date(now);
      close.setHours(BUSINESS.closeHour, BUSINESS.closeMin, 0, 0);

      return now >= open && now <= close;
    }

    function updateStatusBar(tabKey){
      const now = new Date();
      const openText = `ìƒë‹´ì‹œê°„ ${pad2(BUSINESS.openHour)}:${pad2(BUSINESS.openMin)} ~ ${pad2(BUSINESS.closeHour)}:${pad2(BUSINESS.closeMin)}`;
      const sign = TAB_SIGN[tabKey] || { focusedMain:"ğŸ”¥ ì˜¤ëŠ˜ì€ íŠ¹ê°€ ì§‘ì¤‘", main:"í˜„ì¬: íŠ¹ê°€ ì§„í–‰ì¤‘", sub:"ì¡°ê±´ì€ ì¹´ë“œ ê¸°ì¤€" };

      const openNow = isBusinessOpen(now);
      const isFocus = (tabKey === FOCUS_TODAY);

      // ë©”ì¸(ê°„íŒ)
      statusCurrent.textContent = isFocus ? sign.focusedMain : sign.main;

      // ì  ìƒ‰ìƒ(íƒ­ë³„)
      statusDot.style.background = DOT_COLOR[tabKey] || "linear-gradient(135deg,var(--blue) 0%,var(--blue2) 100%)";

      // ì§‘ì¤‘ì´ë©´ ë” ë¹¡ì„¸ê²Œ
      if(isFocus){
        statusDot.style.boxShadow = "0 0 0 10px rgba(255,59,74,0.18), 0 0 22px rgba(255,59,74,0.32)";
      }else{
        statusDot.style.boxShadow = "0 0 0 8px rgba(14,165,233,0.18)";
      }

      // ë³´ì¡° ë¬¸êµ¬(ì‹œê°„ ìë™)
      if(openNow){
        statusSub.innerHTML = `${sign.sub} Â· <b>í†µí™”/ë¬¸ì/ì˜¤í”ˆì¹´í†¡ ì¦‰ì‹œ</b>`;
        statusHours.textContent = openText + " Â· ìƒë‹´ê°€ëŠ¥";
      }else{
        statusSub.innerHTML = `${sign.sub} Â· ì§€ê¸ˆì€ <b>ì¹´í†¡/ë¬¸ì</b> ë‚¨ê²¨ì£¼ë©´ ìˆœì°¨ ë‹µë³€`;
        statusHours.textContent = openText + " Â· ìƒë‹´ì‹œê°„ ì™¸";
      }
    }

    /* ===== íƒ­ ì „í™˜ ===== */
    const tabButtons = document.querySelectorAll(".tab-btn");
    const panels = document.querySelectorAll(".tab-panel");

    function activateTab(tabKey){
      tabButtons.forEach(b => b.classList.toggle("active", b.dataset.tab === tabKey));
      panels.forEach(p => p.classList.toggle("active", p.dataset.panel === tabKey));
      window.scrollTo({ top: 0, behavior: "smooth" });
      updateStatusBar(tabKey);
    }

    tabButtons.forEach(btn => btn.addEventListener("click", () => activateTab(btn.dataset.tab)));

    /* ===== CSV íŒŒì‹± ===== */
    function splitCSVLine(line){
      const out = [];
      let cur = "";
      let inQ = false;
      for(let i=0;i<line.length;i++){
        const ch = line[i];
        if(ch === '"'){
          if(inQ && line[i+1] === '"'){ cur += '"'; i++; }
          else inQ = !inQ;
        } else if(ch === "," && !inQ){
          out.push(cur); cur = "";
        } else cur += ch;
      }
      out.push(cur);
      return out;
    }

    function parseCSV(text){
      const lines = text.replace(/\r/g,"").split("\n").filter(l => l.trim() !== "");
      if(lines.length < 2) return [];
      const headers = splitCSVLine(lines[0]).map(h => h.trim());
      const rows = [];
      for(let i=1;i<lines.length;i++){
        const cols = splitCSVLine(lines[i]);
        const obj = {};
        headers.forEach((h, idx) => obj[h] = (cols[idx] ?? "").trim());
        rows.push(obj);
      }
      return rows;
    }

    function escapeHTML(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function renderCard(item){
      const carrier = (item.carrier || "").trim().toLowerCase();
      const title = item.title || "";
      if(!title.trim()) return "";

      const tag = item.tag || "";
      const price = item.price || "";
      const sub = item.sub || "";
      const b1 = item.badge1 || "";
      const b2 = item.badge2 || "";
      const b3 = item.badge3 || "";

      return `
        <article class="card" data-carrier="${escapeHTML(carrier)}">
          <div class="card-header">
            <h2 class="card-title">${escapeHTML(title)}</h2>
            ${tag.trim() ? `<div class="card-tag">${escapeHTML(tag)}</div>` : ``}
          </div>

          ${price.trim() ? `<div class="price">${escapeHTML(price)}</div>` : ``}
          ${sub.trim() ? `<div class="subtext">${escapeHTML(sub)}</div>` : ``}

          <div class="badge-row">
            ${b1.trim() ? `<span class="badge">${escapeHTML(b1)}</span>` : ``}
            ${b2.trim() ? `<span class="badge">${escapeHTML(b2)}</span>` : ``}
            ${b3.trim() ? `<span class="badge">${escapeHTML(b3)}</span>` : ``}
          </div>

          <div class="actions">
            <a class="btn" href="tel:${CALL_TEL}">í†µí™”</a>
            <a class="btn sms" href="sms:${SMS_NUM}">ë¬¸ì</a>
            <a class="btn kakao" href="${OPEN_KAKAO_URL}" target="_blank" rel="noopener">ì˜¤í”ˆì¹´í†¡</a>
          </div>
        </article>
      `;
    }

    async function loadData(){
      const res = await fetch(CSV_URL, { cache:"no-store" });
      if(!res.ok) throw new Error("data.csv ë¡œë“œ ì‹¤íŒ¨ (ë£¨íŠ¸/íŒŒì¼ëª…/ì»¤ë°‹ í™•ì¸)");
      const text = await res.text();
      const items = parseCSV(text);

      const buckets = { skt:[], kt:[], lg:[], internet:[], mvno:[] };
      items.forEach(it => {
        const c = (it.carrier || "").trim().toLowerCase();
        if(buckets[c]) buckets[c].push(it);
      });

      const emptyMsg = (t)=>`<div style="padding:10px;font-weight:1000;color:#334155;">${t}</div>`;

      document.getElementById("list-skt").innerHTML =
        buckets.skt.map(renderCard).join("") || emptyMsg("ë“±ë¡ëœ SKT íŠ¹íŒì´ ì—†ìŠµë‹ˆë‹¤. (data.csvì—ì„œ titleë§Œ ì±„ìš°ë©´ ë°”ë¡œ í‘œì‹œ)");

      document.getElementById("list-kt").innerHTML =
        buckets.kt.map(renderCard).join("") || emptyMsg("ë“±ë¡ëœ KT íŠ¹íŒì´ ì—†ìŠµë‹ˆë‹¤.");

      document.getElementById("list-lg").innerHTML =
        buckets.lg.map(renderCard).join("") || emptyMsg("ë“±ë¡ëœ LGU+ íŠ¹íŒì´ ì—†ìŠµë‹ˆë‹¤.");

      document.getElementById("list-internet").innerHTML =
        buckets.internet.map(renderCard).join("") || emptyMsg("ë“±ë¡ëœ ì¸í„°ë„·Â·TV íŠ¹íŒì´ ì—†ìŠµë‹ˆë‹¤.");

      document.getElementById("list-mvno").innerHTML =
        buckets.mvno.map(renderCard).join("") || emptyMsg("ë“±ë¡ëœ ì•Œëœ°ìš”ê¸ˆ íŠ¹íŒì´ ì—†ìŠµë‹ˆë‹¤.");
    }

    loadData().catch(err => {
      console.error(err);
      document.querySelector(".content").innerHTML = `
        <div style="padding:18px;border:2px solid #fecaca;background:#fff1f2;border-radius:18px;">
          <div style="font-weight:1000;font-size:18px;margin-bottom:6px;">ë°ì´í„° ë¡œë”© ì‹¤íŒ¨</div>
          <div style="font-weight:1000;color:#7f1d1d;line-height:1.5;">
            data.csvë¥¼ ì½ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.<br/>
            1) repo ë£¨íŠ¸ì— data.csvê°€ ìˆëŠ”ì§€<br/>
            2) íŒŒì¼ëª…ì´ ì •í™•íˆ data.csvì¸ì§€<br/>
            3) Commit í›„ GitHub Pages ë°˜ì˜ëëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
          </div>
        </div>
      `;
    });

    // ì´ˆê¸° íƒ­(SK) + ìƒíƒœë°”
    activateTab("skt");

    // ì‹œê°„ ìë™ ê°±ì‹  (1ë¶„ë§ˆë‹¤)
    setInterval(() => {
      const activeBtn = document.querySelector(".tab-btn.active");
      const tabKey = activeBtn ? activeBtn.dataset.tab : "skt";
      updateStatusBar(tabKey);
    }, 60 * 1000);
  </script>
</body>
</html>
